<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Play â€“ C64 PRG</title>

  <!-- vc64web player -->
  <script src="./js/vc64web_player.js"></script>

  <style>
    body{font-family:system-ui,Arial,sans-serif;margin:16px}
    .box{border:1px solid #ccc;border-radius:12px;padding:12px;margin-bottom:12px}
    #emu{width:100%;height:80vh;background:#000;border-radius:12px}
    button{padding:10px 16px;font-weight:900;cursor:pointer}
    code{font-weight:900}
  </style>
</head>

<body>
  <div class="box">
    <b>Gioca online</b><br>
    Se non parte automaticamente: <code>RUN</code><br><br>
    <button id="play">PLAY</button>
  </div>

  <div id="emu"></div>

<script>
  const sleep = ms => new Promise(r => setTimeout(r, ms));

  async function autorun(){
    await wasm_ready_after_reset();
    await sleep(200);
    await action('RUN=>Enter');
  }

  document.getElementById("play").onclick = () => {
    const config = {
      openROMS: true,          // ðŸ”‘ usa open ROMs â†’ niente richiesta ROM
      navbar: false,
      wide: true,
      port2: true,
      border: 0.3,
      buttons: [{
        run: true,
        script: `(${autorun.toString()})();`
      }]
    };

    vc64web_player.samesite_file = {
      url: "./gioco.prg",
      name: "gioco.prg"
    };

    vc64web_player.load(
      document.getElementById("emu"),
      encodeURIComponent(JSON.stringify(config))
    );
  };
</script>
</body>
</html>
